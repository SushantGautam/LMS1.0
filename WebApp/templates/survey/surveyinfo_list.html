{% load i18n %}
{% load static %}

<div class="clearfix">
    <!-- Model for Import CSV file -->
    <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title" id="exampleModalLabel"><b>{% trans 'Survey File Import' %}</b>
                        <button type="button" class="close closeImportCSV" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </h4>
                </div>
                <div class="modal-body" id="import_csv_body" style="height: 60%;overflow:hidden">
                    <form method="POST" id="form_import_csv" enctype="multipart/form-data">
                        {% csrf_token %} <br><br>
                        <label for="id_import_csv">{% trans 'Choose the CSV file to Import Survey Data' %}</label>
                        <input type="file" name="import_csv" id="id_import_csv" accept=".csv"><br><br>
                        <a target="_blank" class="text-center" href="{% static 'Survey_Import_Format.xlsx' %}"
                           style="padding-top: 2em;">
                            <h4><i class="fa fa-download" aria-hidden="true"></i> {% trans 'Download Sample CSV' %}</h4>
                        </a><br>

                        <span class="button-info" style="cursor:pointer;padding:0.4em;color:#222"><b>{% trans 'Read Detail Info' %}...</b></span>
                        <ul class="info-text" style="display:none;background:azure;">
                            <li>- {% trans 'Survey title should be given' %} ({% trans 'required' %})</li>
                            <li>- {% trans 'Start date and End date should be in standard date format' %} ({% trans 'required' %})</li>
                            <li>- {% trans 'Category can be only General, Course, Session or System' %} ({% trans 'required' %})</li>
                            <li>- {% trans 'At least one question is required in the survey' %}</li>
                            <li>- {% trans 'Question must include question text otherwise question is discarded' %}</li>
                            <li>- {% trans 'MCQ question must have at least 2 option to register the question' %}</li>
                            <li>- {% trans 'Heading format must be same, for short answer question SQA1, SAQ2 ... with question subheading' %}</li>
                            <li>- {% trans 'Similarly for multiple choice question MCQ1, MCQ2 ... with question and options(option1, option2...) as subheadings' %}</li>
                        </ul>

                        <div class="import-message"></div>
                        <div class="text-center">
                            <button class="btn btn-success" id="submitcsv" type="submit"
                                    style="margin:3em auto 2em auto">
                                <span id="submitspinner"></span>{% trans 'Submit File' %}
                            </button>
                            <button class="btn btn-primary closeImportCSV" data-dismiss="modal" aria-label="Close"
                                    style="margin:3em auto 2em auto">{% trans 'Close' %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- End of model -->

    <div id="mainSurveyPage">
        <div class="container">
            <div class="row">
                <div class="row" id="surveyheader">
                    <div class="col-md-3 col-sm-12">
                        <div class="btn-group" id="status" data-toggle="buttons">
                            <label class="btn btn-default btn-on-3 btn-sm active" id="ActiveButton">
                                <input type="radio" value="active" name="survey_filter_radio"
                                       checked="checked">Active</label>
                            <label class="btn btn-default btn-off-3 btn-sm " id="ExpireButton">
                                <input type="radio" value="expire" name="survey_filter_radio">{% trans 'Expired' %}</label>
{#                            <label class="btn btn-default btn-off-3 btn-sm " id="LiveButton">#}
{#                                <input type="radio" value="live" name="survey_filter_radio">Live Survey</label>#}
                        </div>
                    </div>

                    <div class="col-md-9 col-sm-12" id="searchBarSurvey">
                        <form method="get" action="">
                            <div role="search" id="surveySearch">
                                <input type="text" id="keywordInput" name="query" placeholder="Type to search"
                                       value="{{ request.GET.query }}" class="form-control">
                                {#            <div class=" pull-right searchButton">#}
                                <button type="submit" id="navSearchBtn" class="btn btn-inverse"
                                        data-hover-z="1"><i class="fa fa-search"></i>
                                </button>
                                {#            </div>#}
                            </div>
                        </form>
                    </div>
                </div>

                <div id="surveyContainer">
                    <div class="col-md-3 col-sm-3 col-xs-12" style="z-index: 1;">
                        <div class="categoryContainer">
                            <div class="card">
                                <div class="card-body">
                                    <h2 class="card-title ">
                                        <strong>{% trans 'Category' %} &nbsp;&nbsp;&nbsp;</strong>
                                        <small class="exportcsv" data-toggle="modal" data-target="#exampleModal1" id="importcsv-btn" style="cursor: pointer;">
                                            <i class="fa fa-paper-plane"></i>
                                             Import 
                                        </small>
                                        <!-- <small class="">Import Survey</small></h2> -->
                                    <hr>
                                    <div id="card_category">
                                        <h5 class="card-text active">
                                            <a href="#" class="category-name" id="all_survey"><i
                                                    class="fa fa-bar-chart" id="categoryIcons"></i>{% trans 'All Survey' %}</a>
                                        </h5>
                                        {% for category in categories %}
                                            <div class="row card-text">
                                                <div class="col-md-8 ">
                                                    <a href="#" class="category-name" id="{{ category.Category_Name }}"><i
                                                            class="fa fa-{{ category.Category_Icon }}"
                                                            id="categoryIcons"></i>
                                                        {{ category.Category_Name }}
                                                    </a>
                                                </div>
                                                {% if "teachers" in request.path or category.Category_Name|lower == "session" or category.Category_Name|lower == "course" %}
                                                {% else %}
                                                    <button class=" {{ category.Category_Name }} btn btn-success"
                                                            id="category_Add_Button{{ category.Category_Name }}"
                                                            style="margin: 0;"
                                                            data-toggle="modal"
                                                            data-target="#survey_form_modal">{% trans 'Add' %}
                                                    </button>
                                                {% endif %}
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-9 col-sm-9 col-xs-12" style="z-index: 0;">
                        <div id="rowCards">
                            <div class="hR"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div id="survey_form_modal" class="modal fade" style="height: -webkit-fill-available;">
    <div class="modal-dialog">
        <div class="modal-content" style="height: -webkit-fill-available; overflow: auto; overflow-x: hidden;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{% trans 'Create Survey' %}</h4>
            </div>
            <div class="modal-body" id="surveyForm">
                <div>
                    <img src="/static/images/uLMS2019_Loading_SVG.svg" alt="">
                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>