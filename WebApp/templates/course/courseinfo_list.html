{% load static %} {% load i18n %}

<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h5 class="modal-title text-primary font-weight-bold" id="exampleModalLabel">
          {% trans "CSV File Import" %}
        </h5>
        <button type="button" class="close closeImportCSV" data-dismiss="modal" aria-label="Close">
          <i class="ti-close"></i>
        </button>
      </div>
      <div class="modal-body" id="import_csv_body" style="height: 60%;overflow:hidden">
        <form method="POST" id="form_import_csv" enctype="multipart/form-data">
          {% csrf_token %}
          <label for="id_import_csv">{% trans 'Choose the CSV file to Import Course Data' %}</label>
          <input type="file" name="import_csv" id="id_import_csv" accept=".csv" class="mb-4">
          <a target="_blank" class="text-center" href="{% static 'importCourse_sample.csv' %}">
            <h4><i class="fa fa-download" aria-hidden="true"></i> {% trans 'Download Sample CSV' %}</h4>
          </a><br>

          <span class="button-info" style="cursor:pointer;padding:0.4em;color:#222"><b>
              {% trans 'Read Detail Info' %}...</b></span>
          <ul class="info-text" style="display:none;background:azure;">
            <li>- {% trans 'Course Name' %} ({% trans 'required' %})</li>
            <li>- {% trans 'Course Name should be unique within the center' %}</li>
            <li>- {% trans 'Course Provider' %} ({% trans 'required' %})</li>
            <li>- {% trans 'Course Level should be between 1 and 5' %}</li>
          </ul>
          <div class="import-message"></div>
          <div class="text-center mt-4">
            <button class="btn btn-success" id="submitcsv" type="submit">
              <span id="submitspinner"></span>{% trans 'Submit File' %}
            </button>
            <button class="btn btn-primary closeImportCSV ml-4" data-dismiss="modal" aria-label="Close">
              {% trans 'Close' %}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="page-header">
  <div class="page-title">
    <h2>{% trans "Courses" %}</h2>
    <div>
      <a href="{% url 'courseinfo_grid_active' %}" class="btn btn-sm btn-outline-primary mr-2" title="Grid"
        data-toggle="tooltip">
        <i class="fa fa-th-large"></i>
      </a>
      <a href="{% url 'courseinfo_list_active' %}" class="btn btn-sm btn-outline-primary active" title="List"
        data-toggle="tooltip">
        <i class="fa fa-th-list"></i>
      </a>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-6 col-md-6 col-sm-12">
    {% if 'teachers' in request.path %}
    <form method="get" action="" class="query_form">
      <div class="col-md-6">
        <input type="text" name="teacher_coursequery" placeholder="Search Course" value="{{ request.GET.query }}"
          class="form-control course_query" required />
      </div>
      <button class="btn btn-default" type="submit">
        <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
      </button>
    </form>
    {% elif 'students' in request.path %}
    <form method="get" action="" class="query_form">
      <div class="col-md-6">
        <input type="text" name="coursequery" placeholder="Search Course" value="{{ request.GET.query }}"
          class="form-control course_query" required />
      </div>
      <button class="btn btn-default" type="submit">
        <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
      </button>
    </form>
    {% else %}
    <form method="get" action="" class="query_form">
      <div class="row">
        <div class="col-md-6">
          <input type="text" name="query" placeholder="Search Course" value="{{ request.GET.query }}"
            class="form-control course_query" required />
        </div>
        <button class="btn btn-default" type="submit">
          <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
        </button>
      </div>

      {% endif %}
  </div>
  <div class="col-lg-2 col-md-6 col-sm-12 text-right">
    {% if 'inactive' in request.path %}
    <a href="{% url 'courseinfo_grid_active' %}" class="btn">View Active Courses</a>
    {% elif 'active' in request.path %}
    <a href="{% url 'courseinfo_grid_inactive' %}" class="btn">View Inactive Courses</a>
    {% endif %}
  </div>
  {% if 'students' not in request.path %}
  <div class="col-lg-4 col-md-12 col-sm-12 btn-createnew">
    <a class="btn btn-primary pull-right" href="
            {% if '/teachers' in request.path %}
                {% url 'teacher_courseinfo_create' %}
            {% else %}
                {% url 'courseinfo_create' %}
            {% endif %}">
      {% trans "Create New Course" %}
    </a>
    <a class="btn btn-outline-info text-info pull-right mr-4" data-toggle="modal" data-target="#exampleModal1"
      id="importcsv-btn"><i class="fa fa-upload" aria-hidden="true"></i> {% trans 'Import' %}</a>
  </div>
  {% endif %}
</div>
<div class="mt-4">
  {% for object in object_list %}
  <div class="card">
    <div class="card-body">
      <div class="d-lg-flex text-center text-lg-left">
        <a href="{{ object.get_absolute_url }}" title="Vase">
          <img src="{% if object.Course_Cover_File %}
                    {{ object.Course_Cover_File.url }}
                {% else %}
                    {% static 'media/image/course.jpg' %}
                {% endif %}" width="300" class="img-fluid rounded img-height-10" alt="Vase" />
        </a>
        <div class="px-4" style="width: 100%">
          <h4 class="mb-3">
            <a href="{{ object.get_absolute_url }}" class="text-primary">
              {{ object.Course_Name }}
            </a>
          </h4>
          <p>
            Difficulty : {% for i in '12345'|make_list %}
            {% if object.Course_Level >= forloop.counter %}
            <span class="fa fa-fw fa-star text-warning"></span>
            {% else %}
            <span class="fa fa-fw fa-star-o text-warning"></span>
            {% endif %} {% endfor %}
          </p>
          <hr />
          <p class="mb-0">
            {% if object.Course_Description %} {{ object.Course_Description }}
            {% else %} No description {% endif %}
          </p>
          <!-- <div>
                        <a href="product-detail.html" class="btn btn-primary">View</a>
                        <button class="btn btn-primary add-to-card ml-2">Add to Cart</button>
                    </div> -->
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12 my-3 text-center">{% trans "No Course Available" %}</div>
  {% endfor %}
</div>