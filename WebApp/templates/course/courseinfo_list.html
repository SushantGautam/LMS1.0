{% load static %}

<div class="page-header">
    <div class="page-title">
        <h2>Courses</h2>
        <div>
            <a href="{% url 'courseinfo_grid_active' %}" class="btn btn-sm btn-outline-primary ml-2" title="Grid"
                data-toggle="tooltip">
                <i class="fa fa-th-large"></i>
            </a>
            <a href="{% url 'courseinfo_list_active' %}" class="btn btn-sm btn-outline-primary active" title="List"
                data-toggle="tooltip">
                <i class="fa fa-th-list"></i>
            </a>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-8 col-md-6 col-sm-12">
        {% if 'teachers' in request.path %}
        <form method="get" action="" class="query_form">
            <div class="col-md-4">
                <input type="text" name="teacher_coursequery" placeholder="Search Course"
                    value="{{ request.GET.query }}" class="form-control course_query" required />
            </div>
            <button class="btn btn-default" type="submit">
                <i class="fa fa-search"></i>&nbsp;Search
            </button>
        </form>
        {% elif 'students' in request.path %}
        <form method="get" action="" class="query_form">
            <div class="col-md-4">
                <input type="text" name="coursequery" placeholder="Search Course" value="{{ request.GET.query }}"
                    class="form-control course_query" required />
            </div>
            <button class="btn btn-default" type="submit">
                <i class="fa fa-search"></i>&nbsp;Search
            </button>
        </form>
        {% else %}
        <form method="get" action="" class="query_form">
            <div class="row">
                <div class="col-md-4">
                    <input type="text" name="query" placeholder="Search Course" value="{{ request.GET.query }}"
                        class="form-control course_query" required />
                </div>
                <button class="btn btn-default" type="submit">
                    <i class="fa fa-search"></i>&nbsp;Search
                </button>
            </div>
        </form>

        {% endif %}
    </div>
    {% if 'students' not in request.path %}
    <div class="col-lg-4 col-md-6 col-sm-12 btn-createnew">
        <a class="btn btn-primary pull-right" href="
            {% if '/teachers' in request.path %}
                {% url 'teacher_courseinfo_create' %}
            {% else %}
                {% url 'courseinfo_create' %}
            {% endif %}">Create new Course</a>
    </div>
    {% endif %}
</div>
<div class="mt-4">
    {% for object in object_list %}
    <div class="card">
        <div class="card-body">
            <div class="d-lg-flex text-center text-lg-left">
                <a href="{{ object.get_absolute_url }}" title="Vase">
                    <img src="{% if object.Course_Cover_File %}
                    {{ object.Course_Cover_File.url }}
                {% else %}
                    {% static 'media/image/course.jpg' %}
                {% endif %}" width="300" class="img-fluid rounded" alt="Vase">
                </a>
                <div class="px-4" style="width: 100%;">
                    <h4 class="mb-3"><a href="{{ object.get_absolute_url }}"
                            class="text-primary">{{ object.Course_Name }}</a>
                    </h4>
                    <p>
                        Difficulty :
                        {% for i in '12345'|make_list %}
                        {% if object.Course_Level >= forloop.counter %}
                        <span class="fa fa-fw fa-star text-warning"></span>
                        {% else %}
                        <span class="fa fa-fw fa-star-o text-warning"></span>

                        {% endif %}
                        {% endfor %}
                    </p>
                    <hr>
                    <p class="mb-0">{{ object.Course_Description }}</p>
                    <!-- <div>
                        <a href="product-detail.html" class="btn btn-primary">View</a>
                        <button class="btn btn-primary add-to-card ml-2">Add to Cart</button>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 my-3 text-center">
        No Course Available
    </div>
    {% endfor %}
</div>
{% block javascript %}
<script>
    $(".query_form").submit(function (e) {
        val = $(this).find('input').val()
        if (!val.replace(/^\s+|\s+$/g, "").length != 0) {
            console.log('empty')
            alert('Please enter a search term')
            e.preventDefault()
        }
    });
</script>
{% endblock %}