{% load static %}
{% load i18n %}

<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h5 class="modal-title text-primary font-weight-bold" id="exampleModalLabel">
                    {% trans "CSV File Import" %}
                </h5>
                <button type="button" class="close closeImportCSV" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body" id="import_csv_body" style="height: 60%;overflow:hidden">
                <form method="POST" id="form_import_csv" enctype="multipart/form-data">
                    {% csrf_token %}
                    <label for="id_import_csv">{% trans 'Choose the CSV file to Import Course Data' %}</label>
                    <input type="file" name="import_csv" id="id_import_csv" accept=".csv" class="mb-4">
                    <a target="_blank" class="text-center" href="{% static 'importCourse_sample.csv' %}">
                        <h4><i class="fa fa-download" aria-hidden="true"></i> {% trans 'Download Sample CSV' %}</h4>
                    </a><br>

                    <span class="button-info" style="cursor:pointer;padding:0.4em;color:#222"><b>
                            {% trans 'Read Detail Info' %}...</b></span>
                    <ul class="info-text" style="display:none;background:azure;">
                        <li>- {% trans 'Course Name' %} ({% trans 'required' %})</li>
                        <li>- {% trans 'Course Name should be unique within the center' %}</li>
                        <li>- {% trans 'Course Provider' %} ({% trans 'required' %})</li>
                        <li>- {% trans 'Course Level should be between 1 and 5' %}</li>
                    </ul>
                    <div class="import-message"></div>
                    <div class="text-center mt-4">
                        <button class="btn btn-success" id="submitcsv" type="submit">
                            <span id="submitspinner"></span>{% trans 'Submit File' %}
                        </button>
                        <button class="btn btn-primary closeImportCSV ml-4" data-dismiss="modal" aria-label="Close">
                            {% trans 'Close' %}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="text-center">
    <h2 class="text-primary d-inline">
        {% if 'inactive' in request.path %}
            {% trans "Inactive Course List" %}
        {% elif 'active' in request.path %}
            {% trans "Course List" %}
        {% endif %}
    </h2>
    <div class="float-right pt-1">
            {% if 'inactive' in request.path %}
            <a href="{% url 'courseinfo_grid_active' %}" class="btn btn-sm btn-outline-primary mr-2">View Active Courses</a>
            {% elif 'active' in request.path %}
            <a href="{% url 'courseinfo_grid_inactive' %}" class="btn btn-sm btn-outline-primary mr-2">View Inactive Courses</a>
            {% endif %}
        {% if 'inactive' in request.path %}
        <a href="{% url 'courseinfo_grid_inactive' %}" class="btn btn-sm btn-outline-primary mr-2 active" title="Grid"
            data-toggle="tooltip">
            <i class="fa fa-th-large"></i>
        </a>
        <a href="{% url 'courseinfo_list_inactive' %}" class="btn btn-sm btn-outline-primary " title="List" data-toggle="tooltip">
            <i class="fa fa-th-list"></i>
        </a>
        {% elif 'active' in request.path %}
        <a href="{% url 'courseinfo_grid_active' %}" class="btn btn-sm btn-outline-primary mr-2 active" title="Grid"
            data-toggle="tooltip">
            <i class="fa fa-th-large"></i>
        </a>
        <a href="{% url 'courseinfo_list_active' %}" class="btn btn-sm btn-outline-primary " title="List" data-toggle="tooltip">
            <i class="fa fa-th-list"></i>
        </a>
        {% endif %}
    </div>
</div>
<hr />
<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12">
        {% if 'teachers' in request.path %}
        <form method="get" action="" class="query_form">
            <div class="col-md-6 col-sm-6">
                <input type="text" name="teacher_coursequery" placeholder="Search Course"
                    value="{{ request.GET.query }}" class="form-control" required />
            </div>
            <button class="btn btn-outline-dark" type="submit">
                <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
            </button>
        </form>
        {% elif 'students' in request.path %}
        <form method="get" action="" class="query_form">
            <div class="col-md-6 col-sm-6">
                <input type="text" name="coursequery" placeholder="Search Course" value="{{ request.GET.query }}"
                    class="form-control" required />
            </div>
            <button class="btn btn-outline-dark" type="submit">
                <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
            </button>
        </form>
        {% else %}
        <form method="get" action="" class="query_form">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <input type="text" name="query" placeholder="Search Course" value="{{ request.GET.query }}"
                        class="form-control" required />
                </div>
                <button class="btn btn-outline-dark" type="submit">
                    <i class="fa fa-search"></i>&nbsp;{% trans "Search" %}
                </button>
            </div>
        </form>

        {% endif %}
    </div>
   
    {% if 'students' not in request.path %}
    <div class="col-lg-6 col-md-12 col-sm-12 btn-createnew">
        <a class="btn btn-primary pull-right text-white" href="
            {% if '/teachers' in request.path %}
                {% url 'teacher_courseinfo_create' %}
            {% else %}
                {% url 'courseinfo_create' %}
            {% endif %}">{% trans "Create New Course" %}</a>
        <a class="btn btn-outline-github pull-right mr-4" data-toggle="modal" data-target="#exampleModal1"
            id="importcsv-btn"><i class="fa fa-upload" aria-hidden="true"></i> &nbsp;{% trans 'Import' %}</a>

    </div>
    {% endif %}
</div>

<div class="row mt-4">
    {% for object in object_list %}
    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12">
        <div class="card card-container">
            <img src="{% if object.Course_Cover_File %}
                        {{ object.Course_Cover_File.url }}
                    {% else %}
                        {% static 'media/image/course.jpg' %}
                    {% endif %}" class="card-img-top card-image" alt="image" width="100%" height="230px" />
            <!-- <div class="card-title-overlay">
                <h5 class="text-white p-3">{{ object.Course_Name }}</h5>
            </div> -->
            <div class="card-overlay text-white">
                <div class="p-3">
                    <h5 class="course-title"><a href="{{ object.get_absolute_url }}" class="text-white">{{ object.Course_Name }}</a></h5>
                    {% trans "Difficulty" %} :
                    {% for i in '12345'|make_list %}
                    {% if object.Course_Level >= forloop.counter %}
                    <span class="fa fa-fw fa-star text-warning"></span>
                    {% else %}
                    <span class="fa fa-fw fa-star-o text-warning"></span>
                    {% endif %}
                    {% endfor %}
                    <hr>    
                    <p class="card-text height-50">
                        {% if object.Course_Description %}
                        {{ object.Course_Description|truncatechars:60 }}
                        {% else %}
                        {% trans "No description" %}
                        {% endif %}
                    </p>
                    <div class="text-center">
                        <a href="{{ object.get_absolute_url }}" class="btn btn-outline-light text-white">Go to Course</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 my-3 text-center">
        {% trans "No Course Available" %}
    </div>
    {% endfor %}
</div>

