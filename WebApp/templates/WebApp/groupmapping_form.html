{% extends base_file %}
{% load static %}
{% load crispy_forms_tags %}

{% block stylesheet %}
<link rel="stylesheet" href="{% static 'vendors/select2/css/select2.min.css' %}" type=" text/css">
{{ form.media }}
{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'start' %}">Home</a></li>
<li class="breadcrumb-item"><a href="{% url 'groupmapping_list' %}">Student Group</a></li>
<li class="breadcrumb-item active" aria-current="page">
    {% if '/groupmapping/create/' == request.path %}
    Create Student Group
    {% elif '/saveasnew' in request.path %}
    Save New Student Group
    {% else %}
    Edit Student Group
    {% endif %}
</li>
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title d-block text-center">
        <h2>{% if '/groupmapping/create/' == request.path %}
            Create New Student Group
            {% elif '/saveasnew' in request.path %}
            Save New Group
            {% else %}
            Edit Student Group
            {% endif %}</h2>
    </div>
</div>

<div class="row">
    <div class="col-lg-6 col-md-12 m-auto">
        <div class="card p-4">
            <form method="post" id="FormID" enctype="multipart/form-data">
                {% csrf_token %}
                {% if form.errors %}
                {% for field in form %}
                {% for error in field.errors %}
                <div class="m-2 alert alert-danger">
                    <strong>{{ error|escape }}</strong>
                </div>
                {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                <div class="m-2 alert alert-danger">
                    <strong>{{ error|escape }}</strong>
                </div>
                {% endfor %}
                {% endif %}
                <div class="form-group">
                    <label for="id_Member_ID">Group Mapping Name *</label>
                    <input type="text" name="GroupMapping_Name" id="id_GroupMapping_Name" maxlength="200"
                        value="{{ object.GroupMapping_Name }}" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="id_Students" class="float-left">Students *</label>
                    <select class="select2" id="id_Students" name="Students" multiple>
                        {% for x, y in form.fields.Students.choices %}
                        <option value="{{ x }}" {% if form.initial.Students == x %}selected{% endif %}>{{ y }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                {% if '/groupmapping/create/' == request.path %}
                <input type="hidden" id="id_Use_Flag" name="Use_Flag" value="True">
                {% else %}
                <div>
                    <label>
                        Status
                    </label><br>
                    <input type="checkbox" id="id_Use_Flag" class="js-switch" name="Use_Flag"
                        {% if object.Use_Flag == False %} &nbsp; {% else %} checked {% endif %}>
                </div>
                {% endif %}
                <input type="hidden" name="Register_Agent" id="id_Register_Agent" value="{{ request.user.username }}"
                    class="select form-control">
                <input type="hidden" name="Center_Code" id="id_Center_Code" value="{{ request.user.Center_Code.id }}"
                    class="select form-control">
                <div class="submitButton text-center">
                    <button class="btn btn-primary" type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
{% block javascript %}
<script src="{% static 'vendors/select2/js/select2.min.js' %}"></script>

<script>
    $('.select2').select2({
        placeholder: 'Select Students'
    });
</script>

{% endblock %}