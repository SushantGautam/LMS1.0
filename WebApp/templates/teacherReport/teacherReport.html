{% load static %}
{% load model_template_relation %}
{% block stylesheets %}
<!-- <link href="{% static 'vendorsx/datatables.net-bs/css/dataTables.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendorsx/datatables.net-buttons-bs/css/buttons.bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendorsx/datatables.net-responsive-bs/css/responsive.bootstrap.min.css' %}" rel="stylesheet"> -->
{% endblock %}

<div class="container">
    <div class="page-section">
        <div class="media v-middle">
            <div class="media-body">
                <h1 class="text-display-1 margin-none">Teacher Report</h1>
            </div>

        </div>
    </div>
    <div class="row">
        <div class="col-lg-8 col-md-6 col-sm-12">

        </div>
        <div class="col-lg-4 col-md-6 col-sm-12 btn-createnew">

        </div>
    </div>
    <br>
    <div class="panel panel-default">
        <div class="table-responsive" id="tableView">
            <table class="table table-striped table-bordered bg-white nowrap" cellspacing="0" width="100%">
                <thead class="bg-primary ">
                    <tr class="tableTitleRow  ">
                        <th rowspan="2">S.No</th>
                        <th rowspan="2">Teacher Name</th>
                        <th rowspan="2">Course Name</th>
                        <th colspan="
                            {% if max_chapter_count > 0 %}
                                {{ max_chapter_count }}
                            {% else %}
                                1
                            {% endif %}
                        ">Chapter
                        </th>
                        <th rowspan="2">Chapter Contents</th>
                        <th rowspan="2">Total Chapter</th>
                    </tr>


                    {% if max_chapter_count > 0 %}
                        <tr>
                            {% with ''|center:max_chapter_count as range %}
                                {% for _ in range %}
                                    <th>{{ forloop.counter }}</th>
                                {% endfor %}
                            {% endwith %}
                        </tr>
                    {% else %}
                        <tr>
                            <th> No Chapters</th>
                        </tr>
                    {% endif %}


                </thead>
                <tbody>
                    {% for teacher in teacher_list %}
                        {% for course in teacher.get_teacher_courses.courses %}
                            <tr>
                                <td></td>
                                <td><a href="{{ teacher.get_absolute_url }}">{{ teacher }}</a></td>
                                <td><a href="{{ course.get_absolute_url }}">{{ course.Course_Name }}</a></td>
                                <!-- Chapter has content or not -->

                                {% if max_chapter_count > 0 %}
                                    {% for chapter in course.chapterinfos.all %}
                                        <td style="text-align:center">
                                            {% if chapter.has_content %}
                                                <span style="color: green;text-align: center;"
                                                      class="chaptertd hasContent">✔</span>
                                            {% else %}
                                                <span style="color: darkred;" class="chaptertd">❌</span>
                                            {% endif %}
                                        </td>
                                    {% endfor %}
                                    {% if course.chapterinfos.count < max_chapter_count %}
                                        {% with  max_chapter_count|subtract:course.chapterinfos.count as count %}
                                            {% with ''|center:count as range %}
                                                {% for _ in range %}
                                                    <td class="nochapter"> -</td>
                                                {% endfor %}
                                            {% endwith %}
                                        {% endwith %}
                                    {% endif %}
                                {% else %}
                                    <td class="nochapter"> -</td>
                                {% endif %}
                                <td class="chaptercount totalhasContent"></td>
                                <td class="chaptercount totalChapters"></td>
                            </tr>
                        {% endfor %}
                    {% endfor %}

                </tbody>
            </table>
        </div>
    </div>
</div>

