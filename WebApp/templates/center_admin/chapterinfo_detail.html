{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="st-content">
    <div class="container-fluid">
        <div class="media media-grid media-clearfix-xs">
            <div class="media-body">
                <div class="page-section">
                    <div class="media media-grid v-middle">
                        <div class="media-left">
                            <span class="icon-block half bg-blue-300 text-white">{{ object.Chapter_No }}</span>
                        </div>
                        <div class="media-body">
                            <h1 class="text-display-1 margin-none">{{ object.Chapter_Name }}</h1>
                        </div>
                    </div>
                    <br />
                    <p>{{ object.Summary }}</p>
                </div>
            </div>
            <div class="media-right">
                <div class="page-section width-320 width-auto-xs">
                    <div class="panel panel-default paper-shadow" data-z="0.5" data-hover-z="1" data-animated>
                        <div class="panel-heading">
                            <h4 class="text-headline">Chapter</h4>
                        </div>

                        <ul class="list-group">
                            <li class="list-group-item">
                                Course Code : {{ object.Course_Code }}
                            </li>
                            <li class="list-group-item">
                                Status :
                                {% if object.Start_Date and todays_date < object.Start_Date|date:"Y-m-d" %}
                                <span class="text-danger"><b>Inactive</b></span>
                                {% elif object.End_Date and todays_date > object.End_Date|date:"Y-m-d" %}
                                <span class="text-danger"><b>Expired</b></span>
                                {% else %}
                                <span class="text-primary"><b>Active</b></span>
                                {% endif %}
                            </li>
                            <li class="list-group-item">
                                Start Date : {{ object.Start_Date|date:'m/d/Y' }}
                            </li>
                            <li class="list-group-item">
                                End Date : {{ object.End_Date|date:'m/d/Y' }}
                            </li>
                            <li class="list-group-item">
                                Register Agent : {{ object.Register_Agent }}
                            </li>
                        </ul>
                        <div class="panel-body text-center">
                            <a class="btn btn-primary btn-sm" href="{% if '/teachers' in request.path %}
                            /teachers{{ object.get_update_url }}
                            {% else %}
                                {{ object.get_update_url }}
                            {% endif %}">Edit Chapter</a>
                            &nbsp;
                            <a class="btn btn-danger btn-sm chapter-confirm-delete" id="{{ object.pk }}">Delete
                                Chapter</a>
                            <form method="post" action="{% url 'chapterinfo_delete' pk=object.pk %}"
                                id="deleteChapter{{ object.pk }}">
                                {% csrf_token %}
                                <!-- <input type="hidden" value="{{questions.pk}}" name="question_id"> -->
                                <input type="hidden" value="{{ object.pk }}" name="chapter_id">
                                <input type="hidden" value="{{ object.Course_Code.id }}" name="course_id">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
    {% block javascript %}
    <script>
        $(document).on('click', '.chapter-confirm-delete', function () {
            ans = confirm('Are you sure you want to delete this Chapter?');
            if (ans == true) {
                $(`#deleteChapter${this.id}`).submit();
            } else {
                return false;
            }
        });
    </script>
    {% endblock %}