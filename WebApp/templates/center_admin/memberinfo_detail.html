{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container">
    <div class="jumbothon text-center bg-thansparent">
        <h1>Member Information</h1>
    </div>
    <br>
    <table class="table table-striped table-bordered">
        <tr>
            <td>Member ID</td>
            <td>
                {{ object.Member_ID }} <small style="padding-left: 3em;"> Assigned by center </small>
            </td>
        </tr>
        <tr>
            <td>Username</td>
            <td>{{ object.username }} <small style="padding-left: 3em;"> Used for login </small></td>
        </tr>

        <tr>
            <td>Full Name</td>
            <td>{{ object.first_name }} {{ object.last_name }}</td>
        </tr>
        <tr>
            <td>Email</td>
            <td>{{ object.email }}</td>
        </tr>
        <tr>
            <td>Permanent Address</td>
            <td>{{ object.Member_Permanent_Address }}</td>
        </tr>
        <tr>
            <td>Temporary Address</td>
            <td>{{ object.Member_Temporary_Address }}</td>
        </tr>
        <tr>
            <td>BirthDate</td>
            <td>{{ object.Member_BirthDate|date:"F d, Y" }}</td>
        </tr>
        <tr>
            <td>Phone No.</td>
            <td>{{ object.Member_Phone }}</td>
        </tr>

        <tr>
            <td>Gender</td>
            <td>{% if object.Member_Gender == 'M' %}
                Male
                {% elif object.Member_Gender == 'F' %}
                Female
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>Status</td>
            <td>{% if  object.Use_Flag  == True %}
                <span class="text-success">Active</span>
                <a style="float: right;color: #2A3F54;cursor:pointer" class="confirm-deactivate" id="{{object.id}}"><u>
                        Deactivate </u></a>
                <form method="post" action="{% url 'memberinfo_deactivate'  pk=object.pk %}" id="deactivateForm">
                    {% csrf_token %}
                </form>
                {% else %}
                <span class="text-danger">Blocked</span>
                <a style="float: right;color: #2A3F54;cursor:pointer" class="confirm-activate" id="{{object.id}}"><u>
                        Activate </u></a>
                <form method="post" action="{% url 'memberinfo_activate'  pk=object.pk %}" id="activateForm">
                    {% csrf_token %}
                    <input type="hidden" value='' name='url'>
                </form>
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>Register DateTime</td>
            <td class="datecon">{{ object.date_joined|date:'M d, Y H:i' }}</td>
        </tr>
        <tr>
            <td>Member Type</td>
            <td>
                {% if object.Is_CenterAdmin %}
                &nbsp;Admin
                {% endif %}
                {% if object.Is_Teacher %}
                &nbsp;Teacher
                {% endif %}
                {% if object.Is_Student %}
                &nbsp;Student
                {% endif %}

            </td>
        </tr>
        {% if object.password %}
        <tr>
            <td>Password</td>
            <td>&nbsp;******** <a style="float: right;color: #2A3F54" href="/change-password/{{ object.id }}/"><u>
                        Change
                        Password </u></a>
            </td>
        </tr>
        {% elif not object.password %}
        <tr>
            <td>Password</td>
            <td><a style="float: middle" href="/change-password/{{ object.id }}/"><u> Add New Password
                    </u></a></td>
        </tr>
        {% endif %}
    </table>
    <div class="text-center">
        <a class="confirm-delete" style="color: #2A3F54;cursor:pointer">
            <b><u>Delete Member</u></b>
        </a><small style="color:#2A3F54"><u> (Note: Instead of deleting a member you can deactivate him/her
                instead)</u></small>
        <br><br>
        <form method="post" action="{% url 'memberinfo_delete' pk=object.pk %}" id="delete_form">
            {% csrf_token %}
            <input type="hidden">
        </form>
    </div>
</div>
{% endblock %}
{% block javascript %}
<script>
    $(document).on('click', '.confirm-deactivate', function (event) {
        ans = confirm('Are you sure you want to deactivate this Member?');
        if (ans == true) {
            $('#deactivateForm').submit();
        } else {
            return false;
        }
    });
    $(document).on('click', '.confirm-activate', function (event) {
        ans = confirm('Are you sure you want to activate this Member?');
        if (ans == true) {
            $('#activateForm').submit();
        } else {
            return false;
        }
    });

    $(document).on('click', '.confirm-delete', function () {
        ans = confirm('Are you sure you want to delete this Member?');
        if (ans == true) {
            $('#delete_form').submit();
        } else {
            return false;
        }
    });
</script>
{% endblock %}