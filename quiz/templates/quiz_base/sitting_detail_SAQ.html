{% load i18n %}
{% load quiz_tags %}

<h3>Mark Short Answers</h3><br>
<p style="font-size: 14px;"><b>Quiz Title:</b> {{ quiz }}</p><br>
<p style="font-size: 14px;"><b>Description:</b> <br>{{  quiz.description }}</p>
<hr>
<div class="row" style="padding-bottom: 10px ;">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-4">
                <p><b> Tile:</b> {{ quiz.title }}</p>

            </div>
            <div class="col-md-4">
                <p><b>Course :</b> {{ quiz.course_code }}</p>

            </div>
            <div class="col-md-4">
                <p><b>Chapter :</b> {{ quiz.chapter_code }}</p>

            </div>
            <div class="col-md-4">
                <p><b>Type of Quiz :</b> {% if quiz.pre_test %}Pre Test <br>{% endif %}
                    {% if quiz.post_test %}Post Test <br>{% endif %}
                    {% if quiz.exam_paper %}Exam <br>{% endif %}</p>

            </div>
            <div class="col-md-4">
                <p><b>Status :</b>{{ sitting.get_percent_correct }}%</p>
            </div>
            <div class="col-md-4">
                <!-- <p><b>Negative Marking :</b> {{ sitting.quiz.negative_marking }}</p> -->

            </div> -->
        </div>
    </div>
</div>


{% for saq in quiz.get_saquestions %}
    <br>
    <p style="font-size: 16px; font-weight:500">{{forloop.counter}}. {{ saq }}</p>
    <table class="table table-bordered table-striped MarkingDetail">

        <thead class="thead-light bg-primary">
        <tr>
            <th>{% trans "Username" %}</th>
            <th>{% trans "User answer" %}</th>
            <th>{% trans "Full Marks" %}</th>
            <th>{% trans "Marks Obtained" %}</th>
            <th>{% trans "Action" %}</th>
        </tr>
        </thead>

        <tbody>
        {% for sitting in quiz.sitting_set.all %}
            {% for question in sitting.questions_with_user_answers %}
                {% if question.pk == saq.pk %}
                    {% if question.is_saq %}
                        <tr>
                            <td> {{ sitting.user }} </td>

                            <td>{{ question.user_answer }}</td>

                            <td>{{ question.score }}</td>
                            <td>{{ question.score_obtained }}</td>

                            <td style="text-align: center">
                                <form action="" method="POST">{% csrf_token %}
                                    <input type="number" name="new_score" min="0" max="{{ question.score }}"
                                           id="input{{ question.id }}"
                                           step="0.5" style="width: -webkit-fill-available;" required>
                                    <input type="hidden" name="saq_id" value="{{ question.id }}">
                                    <br>
                                    <br>
                                    <button type="submit" class="btn btn-warning score_submit"
                                            id="{{ question.id }}">{% trans "Change Score" %}</button>
                                </form>
                            </td>
                        </tr>
                    {% endif %}
                {% endif %}
            {% endfor %}
        {% endfor %}
        </tbody>

    </table>
    <br>
{% endfor %}


