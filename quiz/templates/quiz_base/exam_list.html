{% load static %}
{% load i18n %}

<h3 class="text-primary" style="margin: 15px 0;">{% trans "List of Exams" %}</h3>

{% if object_list %}
<div class="table-responsive">
  <table data-toggle="data-table" class="table table-striped table-bordered nowrap" id="ExamList" width="100%">
    <thead class="thead-dark">
      <tr>
        <th>{% trans "Quiz" %}</th>
        <th>{% trans "Course" %}</th>
        <!-- <th">{% trans "Chapter" %}</th> -->
        <th>{% trans "Status" %}</th>
        <th>{% trans "Action" %}</th>
      </tr>
    </thead>

    <tbody>
      <!-- <tr>
      <form action="" method="GET">
        <td><input type="text" name="quiz_filter" /></td>
        <td><input type="text" name="course_filter" /></td>
        <td><input type="text" name="chapter_filter" /></td>
        <td></td>
        <td>
          <button type="submit" class="btn btn-default">{% trans "Filter" %}</button>
        </td>
      </form>
    </tr> -->
      {% for object in object_list %}
      <tr>
        <td>
          {% if '/teachers' in request.path %}
          <a href="{% url 'teacher_quiz_detail' pk=object.id %}" class="text-primary font-weight-bold">{{ object.title }}</a>
          {% elif '/students' in request.path %}
          {{ object.title }}
          {% else %}
          <a href="{% url 'quiz_detail' pk=object.id %}" class="text-primary font-weight-bold">{{ object.title }}</a>
          {% endif %}
        </td>
        <td>{{ object.course_code.Course_Name }}</td>
        <!-- <td>{{ object.chapter_code.Chapter_Name }}</td> -->
        <td>
          {% if object.draft is True %}
          <span class="text-danger">Inactive</span>
          {% else %}
          <span class="text-success">Running</span>
          {% endif %}
        </td>
        <td class="text-center">
          {% if '/students' in request.path %}
          {% if object.draft is True %}
          ---
          {% else %}
          {% if object.already_submitted %}
          {# Already Submitted#}
          <a href="{% url 'quiz_question' quiz_name=object.url %}">Already Submitted</a>
          {% else %}
          <a href="{% url 'quiz_question' quiz_name=object.url %}">Take Quiz</a>
          {% endif %}
          {% endif %}
          {% else %}
          {% if object.draft is True %}
          <form action="{% url 'teacher_activate_quiz' pk=object.pk %}" method="post">{% csrf_token %}
            <input type="hidden" value="{{ request.path }}" name="redirect-url">
            <input type="button" value="Take Exam"
              class="btn btn-success btn-sm confirm-activate cursor-pointer">
          </form>
          {% else %}
          <form action="{% url 'teacher_deactivate_quiz' pk=object.pk %}" method="post">{% csrf_token %}
            <input type="hidden" value="{{ request.path }}" name="redirect-url">
            <input type="button" value="Stop Exam"
              class="btn btn-danger btn-sm confirm-deactivate cursor-pointer">
          </form>
          {% endif %}
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}
<p>{% trans "There are no matching quizzes" %}.</p>
{% endif %}
